{% extends "base.html" %}

{%block content%}
welcome to our twitter app
<div id='tweets'>
    loading...
</div>

<script>
    const tweetelement = document.getElementById('tweets')
     

    const xhr = new XMLHttpRequest()
    const method = 'GET'
    const url = '/tweets'
    const responseType = 'json'

    xhr.responseType=responseType
    xhr.open(method, url)
    xhr.onload = function(){
        const serverResponse = xhr.response
        var listeditems = serverResponse.response
        console.log(serverResponse)
        var tweetstr = ''
        
    for (let i=0; i<listeditems.length; i++){
        console.log(listeditems[i])
        var currentItem = '<h1>'+listeditems[i].id+'</h1>'+'<p>'+listeditems[i].content+'</p>'
        tweetstr += currentItem
    }
    tweetelement.innerHTML = tweetstr
    }
    xhr.send()
</script>

{%endblock%}